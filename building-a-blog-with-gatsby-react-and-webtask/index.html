<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/component---src-layouts-index-js-51093b88744bb31359c7.js" as="script"/><link rel="preload" href="/component---src-templates-post-template-js-efb6222c664f8637d165.js" as="script"/><link rel="preload" href="/path---building-a-blog-with-gatsby-react-and-webtask-3fb1a26adc6104960c09.js" as="script"/><link rel="preload" href="/app-b97bfefd3aeed9fc19ca.js" as="script"/><link rel="preload" href="/commons-44750fa6a1ae314db841.js" as="script"/><title data-react-helmet="true">Build a blog with Gatsby, React and Webtask.io! - technical writer - Luke Oliff</title><link data-react-helmet="true" rel="canonical" href="https://auth0.com/blog/building-a-blog-with-gatsby-react-and-webtask/"/><meta data-react-helmet="true" name="description" content="Building a blog with Gatsby, the React based static content generator. Using Webtask.io, the serverless endpoint service to provide a backend API."/><meta data-react-helmet="true" property="og:url" content="https://lukeoliff.com/building-a-blog-with-gatsby-react-and-webtask/"/><meta data-react-helmet="true" property="og:title" content="Build a blog with Gatsby, React and Webtask.io! - technical writer - Luke Oliff"/><meta data-react-helmet="true" property="og:description" content="Building a blog with Gatsby, the React based static content generator. Using Webtask.io, the serverless endpoint service to provide a backend API."/><meta data-react-helmet="true" property="og:image" content="[object Object]"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mroliff"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#666"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style id="__jsx-2231607196">.item.jsx-2231607196,.showItem.jsx-2231607196{background:transparent;-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.item.jsx-2231607196 a,.showItem.jsx-2231607196 a{padding:10px;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.item.jsx-2231607196 svg,.showItem.jsx-2231607196 svg{margin:0 5px 0 0;opacity:0.3;}
.itemList .hideItem{display:none;}
@media screen and (min-width:1024px){.item.jsx-2231607196 a{color:#3e3e3c;padding:10px;-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;border-radius:5px;}.homepage:not(.fixed) .item.jsx-2231607196 a{color:#ffffff;}.item.jsx-2231607196 a:hover{color:#4e5a6d;background:#ffffff;background:rgba(255,255,255,0.4);}.item.jsx-2231607196 svg{-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;}.item.jsx-2231607196:hover svg{fill:#4e5a6d;opacity:1;}.hero .item.jsx-2231607196:hover svg svg{fill:green;}.showItem.jsx-2231607196{display:none;}.hiddenItem.jsx-2231607196{text-align:left;padding:5px;}.hiddenItem.jsx-2231607196 a.inHiddenItem{color:#3e3e3c;}.hiddenItem.jsx-2231607196 a.inHiddenItem:hover{color:#4e5a6d;}}</style><style id="__jsx-3546659225">.menu.jsx-3546659225{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#ffffff;bottom:0;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;left:0;max-height:50px;padding:0 10px;position:fixed;width:100%;z-index:1;-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;}
.itemList.jsx-3546659225{display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;list-style:none;margin:0;padding:0;position:relative;width:100%;}
@media screen and (max-width:1023px){.menu.jsx-3546659225:after{position:absolute;content:"";left:20px;right:20px;top:0;height:1px;background:#4e5a6d;}.menu.open.jsx-3546659225{padding:20px;}.homepage:not(.fixed) .menu.jsx-3546659225{bottom:-100px;}}
@media screen and (min-width:1024px){.menu.jsx-3546659225{border-top:none;background:transparent;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding-left:50px;-webkit-transition:none;-webkit-transition:none;transition:none;}.itemList.jsx-3546659225{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:0;}.hiddenItemList.jsx-3546659225{list-style:none;margin:0;position:absolute;background:#ffffff;border:1px solid #ecebea;top:48px;right:10px;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding:20px;border-radius:5px;border-top-right-radius:0;}.hiddenItemList.jsx-3546659225:after{content:"";background:#ffffff;z-index:10;top:-10px;right:-1px;width:44px;height:10px;position:absolute;border-left:1px solid #ecebea;border-right:1px solid #ecebea;}.homepage:not(.fixed) .hiddenItemList.jsx-3546659225{border:1px solid transparent;background:#ffffff;background:rgba(255,255,255,0.9);top:50px;}.homepage:not(.fixed) .hiddenItemList.jsx-3546659225:after{top:-11px;border-left:1px solid transparent;border-right:1px solid transparent;background:#ffffff;background:rgba(255,255,255,0.9);}.fixed .hiddenItemList.jsx-3546659225{top:44px;}}</style><style id="__jsx-768897745">.header.jsx-768897745{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#ffffff;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:80px;position:relative;top:0;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.header.jsx-768897745 a.logoType{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:"column";-webkit-flex-direction:"column";-ms-flex-direction:"column";flex-direction:"column";color:#3e3e3c;}
.header.jsx-768897745 a.logoType .logo.jsx-768897745{-ms-flex-negative:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}
.header.homepage.jsx-768897745{position:absolute;background-color:transparent;height:100px;;}
h1.jsx-768897745{font-size:1.35em;font-weight:400;margin:0 0 5px 0;}
h2.jsx-768897745{font-weight:400;font-size:.8em;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;margin:0;}
.logo.jsx-768897745{border-radius:65% 75%;border:1px solid #eee;display:inline-block;height:44px;margin:0 20px 0 0;overflow:hidden;width:44px;-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;}
.homepage.jsx-768897745 .logo.jsx-768897745{height:60px;width:60px;}
.logo.jsx-768897745 img.jsx-768897745{width:100%;}
.sensor.jsx-768897745{display:block;position:absolute;bottom:0;z-index:1;left:0;right:0;height:1px;top:80px;}
@media screen and (min-width:600px){.header.jsx-768897745{padding:40px;}.header.homepage.jsx-768897745{height:100px;;}}
@media screen and (max-width:1023px){.header.homepage.jsx-768897745 .logo.jsx-768897745{border:none;}.header.homepage.jsx-768897745 a.logoType,.header.homepage.jsx-768897745 h1.jsx-768897745{color:#ffffff;}.header.homepage.jsx-768897745 h2.jsx-768897745{color:#dddbda;}}
@media screen and (min-width:1024px){.header.jsx-768897745{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#ffffff;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;top:0;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-transition:padding 0.5s;-webkit-transition:padding 0.5s;transition:padding 0.5s;}.header.fixed.jsx-768897745{height:50px;;background-color:#ffffff;left:0;padding:0 20px;position:fixed;top:0;width:100%;z-index:1;}.header.fixed.jsx-768897745 h1.jsx-768897745{margin:0 0 2px 0;}.header.fixed.jsx-768897745 h2.jsx-768897745{display:none;}.header.homepage.jsx-768897745:not(.fixed) a.logoType,.header.homepage.jsx-768897745:not(.fixed) h1.jsx-768897745{color:#ffffff;}.header.homepage.jsx-768897745:not(.fixed) h2.jsx-768897745{color:#dddbda;}.header.jsx-768897745 a.logoType{text-align:left;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-ms-flex-negative:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:auto;}.logo.jsx-768897745{margin:0 20px 0 0;}.fixed.jsx-768897745 .logo.jsx-768897745{height:36px;width:36px;}.header.homepage.jsx-768897745:not(.fixed) .logo.jsx-768897745{border:none;}h2.jsx-768897745{-webkit-animation-duration:0.5s;-webkit-animation-duration:0.5s;animation-duration:0.5s;-webkit-animation-name:h2Entry;-webkit-animation-name:h2Entry-jsx-768897745;animation-name:h2Entry-jsx-768897745;}@-webkit-keyframes h2Entry{from.jsx-768897745{opacity:0;}to.jsx-768897745{opacity:1;}}@-webkit-keyframes h2Entry-jsx-768897745{from{opacity:0;}to{opacity:1;}}@keyframes h2Entry-jsx-768897745{from{opacity:0;}to{opacity:1;}}}</style><style id="__jsx-2210477915">h1.jsx-2210477915{font-size:2.2em;margin:0 0 40px 0;-webkit-animation-name:headlineEntry;-webkit-animation-name:headlineEntry-jsx-2210477915;animation-name:headlineEntry-jsx-2210477915;-webkit-animation-duration:1s;-webkit-animation-duration:1s;animation-duration:1s;}
h1.jsx-2210477915 span{font-weight:400;display:block;font-size:0.5em;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;margin:0 0 5px 0;}
h1.jsx-2210477915 svg{height:0.75em;fill:#4e5a6d;}
@-webkit-keyframes headlineEntry{from.jsx-2210477915{opacity:0.5;}to.jsx-2210477915{opacity:1;}}
@-webkit-keyframes headlineEntry-jsx-2210477915{from{opacity:0.5;}to{opacity:1;}}
@keyframes headlineEntry-jsx-2210477915{from{opacity:0.5;}to{opacity:1;}}
@media screen and (min-width:600px){h1.jsx-2210477915{font-size:calc(2em * 1.2);}}
@media screen and (min-width:1024px){h1.jsx-2210477915{font-size:calc(2em * 1.4);}}</style><style id="__jsx-1230805486">.meta.jsx-1230805486{display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;font-size:0.8em;margin:20px 0;background:transparent;}
.meta.jsx-1230805486 svg{fill:#4e5a6d;margin:0 5px 0 0;}
.meta.jsx-1230805486 span.jsx-1230805486{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-transform:uppercase;margin:5px 10px 5px 0;}
@media screen and (min-width:600px){.meta.jsx-1230805486{margin:calc(20px * 1.5) 0 20px;}}</style><style id="__jsx-1548652502">.bodytext.jsx-1548652502{-webkit-animation-name:bodytextEntry;-webkit-animation-name:bodytextEntry-jsx-1548652502;animation-name:bodytextEntry-jsx-1548652502;-webkit-animation-duration:1s;-webkit-animation-duration:1s;animation-duration:1s;}
.bodytext.jsx-1548652502 h2,.bodytext.jsx-1548652502 h3{margin:1.5em 0 1em;}
.bodytext.jsx-1548652502 h2{line-height:1.2;font-size:1.7em;}
.bodytext.jsx-1548652502 h3{font-size:1.35em;line-height:1.3;}
.bodytext.jsx-1548652502 p{font-size:1.1em;line-height:1.6;margin:0 0 1.5em;}
.bodytext.jsx-1548652502 ul{list-style:circle;margin:0 0 1.5em;padding:0 0 0 1.5em;}
.bodytext.jsx-1548652502 li{margin:0.7em 0;line-height:1.5;}
.bodytext.jsx-1548652502 a{font-weight:600;color:#4e5a6d;-webkit-text-decoration:underline;text-decoration:underline;}
.bodytext.jsx-1548652502 a.gatsby-resp-image-link{border:0;display:block;margin:2.5em 0;border-radius:10px;overflow:hidden;border:1px solid #ecebea;}
.bodytext.jsx-1548652502 code.language-text{background:#ecebea;text-shadow:none;color:inherit;padding:0.1em 0.3em 0.2em;border-radius:0.1em;}
@-webkit-keyframes bodytextEntry{from.jsx-1548652502{opacity:0;}to.jsx-1548652502{opacity:1;}}
@-webkit-keyframes bodytextEntry-jsx-1548652502{from{opacity:0;}to{opacity:1;}}
@keyframes bodytextEntry-jsx-1548652502{from{opacity:0;}to{opacity:1;}}</style><style id="__jsx-646394116">.author.jsx-646394116{margin:40px 0;padding:40px 0;border-top:1px solid #ecebea;border-bottom:1px solid #ecebea;}
.avatar.jsx-646394116{float:left;border-radius:65% 75%;border:1px solid #ecebea;display:inline-block;height:50px;margin:5px 20px 0 0;overflow:hidden;width:50px;}
.avatar.jsx-646394116 img.jsx-646394116{width:100%;}
.note.jsx-646394116{font-size:0.9em;line-height:1.6;}
@media screen and (min-width:600px){.author.jsx-646394116{display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.avatar.jsx-646394116{-webkit-box-flex:0;-ms-flex:0 0 auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}}</style><style id="__jsx-126278577">.links.jsx-126278577{display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:0 20px 40px;border-bottom:1px solid #ecebea;margin:0 0 40px 0;}
.links.jsx-126278577 a{display:-webkit-box;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}
.links.jsx-126278577 a:nth-child(2){margin:20px 0 0;}
.links.jsx-126278577 svg{fill:orange;width:20px;height:20px;-ms-flex-negative:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-ms-flex-positive:0;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;margin:0 20px 0 0;}
h4.jsx-126278577{font-weight:600;margin:0;font-size:1.1em;}
time.jsx-126278577{color:#969492;display:block;font-weight:400;font-size:0.8em;margin-top:0.5em;}
@media screen and (min-width:1024px){.links.jsx-126278577{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.links.jsx-126278577 a{-ms-flex-preferred-size:50%;-webkit-flex-basis:50%;-ms-flex-preferred-size:50%;flex-basis:50%;}.links.jsx-126278577 a:nth-child(2){margin:0;}.links.jsx-126278577 svg{-webkit-transition:all 0.5s;-webkit-transition:all 0.5s;transition:all 0.5s;margin:0 10px 0 0;}@media (hover:hover){.links.jsx-126278577 a:hover svg{-webkit-transform:scale(1.5);-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5);}}}</style><style id="__jsx-3595558049">.comments.jsx-3595558049{margin:0 -8px 20px;}</style><style id="__jsx-4002454992">.article.jsx-4002454992{padding:20px;margin:0 auto;}
@media screen and (min-width:600px){.article.jsx-4002454992{padding:calc(20px) calc(20px * 2);max-width:650px;}}
@media screen and (min-width:1024px){.article.jsx-4002454992{padding:calc(20px * 2 + 90px) 0 calc(20px * 2);max-width:1000px;}}</style><style id="__jsx-2344609357">.footer.jsx-2344609357{background:#ffffff;padding:20px;padding-top:0;padding-bottom:120px;}
.footer.jsx-2344609357 ul{list-style:none;text-align:center;padding:0;}
.footer.jsx-2344609357 ul li{color:#969492;font-size:.8em;padding:2px 10px;position:relative;display:inline-block;}
.footer.jsx-2344609357 ul li:after{content:"•";position:absolute;right:calc(5px * -1);}
.footer.jsx-2344609357 ul li:last-child:after{content:"";}
@media screen and (min-width:1024px){.footer.jsx-2344609357{padding:0 1em 1.5em;}}</style><style id="__jsx-1304903616">main.jsx-1304903616{min-height:80vh;}</style><style id="__jsx-3347019808">html{-webkit-box-sizing:border-box;box-sizing:border-box;}
*,*:after,*:before{-webkit-box-sizing:inherit;box-sizing:inherit;margin:0;padding:0;}
body{font-family:Arial, sans-serif;;}
h1,h2,h3{font-weight:400;line-height:1.1;-webkit-letter-spacing:-0.03em;-moz-letter-spacing:-0.03em;-ms-letter-spacing:-0.03em;letter-spacing:-0.03em;margin:0;}
h1{-webkit-letter-spacing:-0.04em;-moz-letter-spacing:-0.04em;-ms-letter-spacing:-0.04em;letter-spacing:-0.04em;}
p{margin:0;}
strong{font-weight:400;}
a{-webkit-text-decoration:none;text-decoration:none;color:#666;}
main{width:auto;display:block;}</style><style id="gatsby-inlined-css">@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300.60c86674.woff2) format("woff2"),url(/static/open-sans-latin-300.521d17bc.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic.06bbd318.woff2) format("woff2"),url(/static/open-sans-latin-300italic.8a648ff3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400.cffb686d.woff2) format("woff2"),url(/static/open-sans-latin-400.bf2d0783.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic.987032ea.woff2) format("woff2"),url(/static/open-sans-latin-400italic.db70d0b9.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600.223a277b.woff2) format("woff2"),url(/static/open-sans-latin-600.1cd5320f.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic.4950a720.woff2) format("woff2"),url(/static/open-sans-latin-600italic.318ea1ad.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700.d08c09f2.woff2) format("woff2"),url(/static/open-sans-latin-700.623e3205.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic.c02f5da6.woff2) format("woff2"),url(/static/open-sans-latin-700italic.72e19cbb.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800.aaeffaf2.woff2) format("woff2"),url(/static/open-sans-latin-800.c6aa0c4a.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic.6b3973ff.woff2) format("woff2"),url(/static/open-sans-latin-800italic.79b58175.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#D0E0D8"/><meta name="apple-mobile-web-app-title" content="Lazywill"/><link rel="apple-touch-icon" href="/icons/apple-icon-57x57.png" sizes="57x57"/><link rel="apple-touch-icon" href="/icons/apple-icon-60x60.png" sizes="60x60"/><link rel="apple-touch-icon" href="/icons/apple-icon-72x72.png" sizes="72x72"/><link rel="apple-touch-icon" href="/icons/apple-icon-76x76.png" sizes="76x76"/><link rel="apple-touch-icon" href="/icons/apple-icon-114x114.png" sizes="114x114"/><link rel="apple-touch-icon" href="/icons/apple-icon-120x120.png" sizes="120x120"/><link rel="apple-touch-icon" href="/icons/apple-icon-144x144.png" sizes="144x144"/><link rel="apple-touch-icon" href="/icons/apple-icon-152x152.png" sizes="152x152"/><link rel="apple-touch-icon" href="/icons/apple-icon-180x180.png" sizes="180x180"/><link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png"/></head><body><noscript>You need to enable JavaScript to run this app!</noscript><div id="___gatsby"><header class="jsx-768897745 header  "><a class="logoType" href="/"><div class="jsx-768897745 logo"><img src="/static/avatar.fe8a3f2f.jpg" alt="dad, technical writer, security advocate - Luke Oliff" class="jsx-768897745"/></div><div class="jsx-768897745 type"><h1 class="jsx-768897745">Luke Oliff</h1><h2 class="jsx-768897745">dad, technical writer, security advocate</h2></div></a><nav rel="js-menu" class="jsx-3546659225 menu "><ul class="jsx-3546659225 itemList"><li class="jsx-2231607196 item"><a class="" data-slug="/" href="/"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m32.9 22.1v10.8q0 0.5-0.4 1t-1 0.4h-8.6v-8.6h-5.7v8.6h-8.6q-0.5 0-1-0.4t-0.4-1v-10.8q0 0 0 0t0-0.1l12.9-10.6 12.8 10.6q0 0.1 0 0.1z m5-1.5l-1.4 1.7q-0.2 0.2-0.4 0.2h-0.1q-0.3 0-0.5-0.2l-15.4-12.8-15.5 12.8q-0.2 0.2-0.5 0.2-0.3 0-0.5-0.2l-1.4-1.7q-0.1-0.2-0.1-0.5t0.2-0.5l16.1-13.4q0.7-0.6 1.7-0.6t1.7 0.6l5.4 4.6v-4.4q0-0.3 0.2-0.5t0.5-0.2h4.3q0.3 0 0.5 0.2t0.2 0.5v9.1l4.9 4.1q0.2 0.2 0.3 0.5t-0.2 0.5z"></path></g></svg> <!-- -->Home</a></li><li class="jsx-2231607196 item"><a class="" data-slug="/category/" href="/category/"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m13 10q0-1.2-0.8-2t-2.1-0.9-2 0.9-0.8 2 0.8 2 2 0.9 2.1-0.9 0.8-2z m23.8 12.9q0 1.1-0.8 2l-11 10.9q-0.8 0.9-2 0.9-1.2 0-2-0.9l-16-15.9q-0.8-0.9-1.4-2.3t-0.6-2.6v-9.3q0-1.1 0.8-2t2.1-0.8h9.2q1.2 0 2.7 0.5t2.2 1.5l16 15.9q0.8 0.9 0.8 2.1z"></path></g></svg> <!-- -->Categories</a></li><li class="jsx-2231607196 item"><a class="" data-slug="/search/" href="/search/"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m27.2 18.6q0-4.2-2.9-7.1t-7.1-2.9-7 2.9-3 7.1 2.9 7 7.1 3 7.1-3 2.9-7z m11.4 18.5q0 1.2-0.8 2.1t-2 0.8q-1.2 0-2-0.8l-7.7-7.7q-4 2.8-8.9 2.8-3.2 0-6.1-1.3t-5-3.3-3.4-5-1.2-6.1 1.2-6.1 3.4-5.1 5-3.3 6.1-1.2 6.1 1.2 5 3.3 3.4 5.1 1.2 6.1q0 4.9-2.7 8.9l7.6 7.6q0.8 0.9 0.8 2z"></path></g></svg> <!-- -->Search</a></li><li class="jsx-2231607196 item"><a class="" data-slug="/about/" href="/about/"> <!-- -->About me</a></li></ul></nav></header><div class="jsx-768897745 sensor"></div><main class="jsx-1304903616 jsx-3347019808"><article class="jsx-4002454992 article"><header><h1 class="jsx-2210477915">Build a blog with Gatsby, React and Webtask.io!</h1><p class="jsx-1230805486 meta"><span class="jsx-1230805486"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="18" width="18" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m4.4 37.1h6.4v-6.4h-6.4v6.4z m7.8 0h7.2v-6.4h-7.2v6.4z m-7.8-7.8h6.4v-7.2h-6.4v7.2z m7.8 0h7.2v-7.2h-7.2v7.2z m-7.8-8.6h6.4v-6.4h-6.4v6.4z m16.4 16.4h7.1v-6.4h-7.1v6.4z m-8.6-16.4h7.2v-6.4h-7.2v6.4z m17.2 16.4h6.4v-6.4h-6.4v6.4z m-8.6-7.8h7.1v-7.2h-7.1v7.2z m-7.9-19.3v-6.4q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v6.4q0 0.3 0.2 0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m16.5 19.3h6.4v-7.2h-6.4v7.2z m-8.6-8.6h7.1v-6.4h-7.1v6.4z m8.6 0h6.4v-6.4h-6.4v6.4z m0.7-10.7v-6.4q0-0.3-0.2-0.5t-0.5-0.2h-1.5q-0.3 0-0.5 0.2t-0.2 0.5v6.4q0 0.3 0.2 0.5t0.5 0.2h1.5q0.2 0 0.5-0.2t0.2-0.5z m8.5-1.4v28.5q0 1.2-0.8 2.1t-2 0.8h-31.4q-1.2 0-2.1-0.9t-0.8-2v-28.5q0-1.2 0.8-2t2.1-0.9h2.8v-2.1q0-1.5 1.1-2.6t2.5-1h1.4q1.5 0 2.5 1.1t1.1 2.5v2.1h8.6v-2.1q0-1.5 1-2.6t2.5-1h1.5q1.4 0 2.5 1.1t1 2.5v2.1h2.9q1.1 0 2 0.9t0.8 2z"></path></g></svg> <!-- -->2018-03-01</span><span class="jsx-1230805486"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="18" width="18" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m35.9 31.4q0 2.6-1.6 4.2t-4.3 1.5h-19.5q-2.7 0-4.4-1.5t-1.6-4.2q0-1.2 0.1-2.3t0.3-2.5 0.6-2.4 0.9-2.2 1.4-1.8 1.9-1.2 2.5-0.4q0.2 0 1 0.5t1.6 1 2.4 1.1 3 0.5 3-0.5 2.4-1.1 1.7-1 0.9-0.5q1.4 0 2.5 0.4t1.9 1.2 1.4 1.8 0.9 2.2 0.6 2.4 0.4 2.5 0 2.3z m-7.1-20q0 3.6-2.5 6.1t-6.1 2.5-6-2.5-2.6-6.1 2.6-6 6-2.5 6.1 2.5 2.5 6z"></path></g></svg> <!-- -->luke oliff</span><span class="jsx-1230805486"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="18" width="18" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m13 10q0-1.2-0.8-2t-2.1-0.9-2 0.9-0.8 2 0.8 2 2 0.9 2.1-0.9 0.8-2z m23.8 12.9q0 1.1-0.8 2l-11 10.9q-0.8 0.9-2 0.9-1.2 0-2-0.9l-16-15.9q-0.8-0.9-1.4-2.3t-0.6-2.6v-9.3q0-1.1 0.8-2t2.1-0.8h9.2q1.2 0 2.7 0.5t2.2 1.5l16 15.9q0.8 0.9 0.8 2.1z"></path></g></svg><a href="/category/portfolio">portfolio</a></span></p></header><div class="jsx-1548652502 bodytext"><p><strong>TL;DR:</strong> <a href="https://www.gatsbyjs.org/">Gatsby</a> is a modern <a href="https://reactjs.org/">React</a> based static content generator, and it boasts an <a href="https://www.gatsbyjs.org/features/#legend">impressive list</a> of out-the-box features. In this article, we’re going to be building a blog, and adding extra features like pagination, user authentication with <a href="https://auth0.com/docs/libraries/auth0js">Auth0.js</a>, and newsletter subscription using an API endpoint built on <a href="https://webtask.io">Webtask.io</a>.</p>
<p><strong>This post is original content developed by me for the <a href="https://auth0.com/blog">Auth0’s blog</a> and has been re-posted here as part of an online portfolio with permission. Relevant attribution and canonical links exist. <a href="https://auth0.com/blog/building-a-blog-with-gatsby-react-and-webtask/">Click here to see the original</a>.</strong></p>
<p><strong>The final code can be found at the <a href="https://github.com/auth0-blog/auth0-gatsby-blog">auth0-gatsby-blog GitHub repo</a>.</strong></p>
<hr>
<h2>About Gatsby</h2>
<p><a href="https://www.gatsbyjs.org/">Gatsby</a> is a modern static content generator for <a href="https://reactjs.org/">React</a> and it boasts an <a href="https://www.gatsbyjs.org/features/#legend">impressive list</a> of out-the-box features. There are alternatives to Gatsby, like <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io/">Hugo</a> and <a href="https://hexo.io/">Hexo</a>, <a href="https://www.staticgen.com/">among others</a>. Generally speaking there is one emerging for each preferable language stack. Traditionally, static site generators let you generate content for the web as HTML that can be cached, instead of compiling the HTML on request.</p>
<p>Before static site generators, a lot of us would have relied on software such as <a href="https://wordpress.org/">WordPress</a>, <a href="https://www.drupal.org/">Drupal</a> or services like <a href="https://www.squarespace.com/">Squarespace</a> to allow us to both manage and deliver our content to the internet. Typically, they work by generating each page on-demand. They would get the content from a database and render it using a template engine. The problems can be reliability <em>AND</em> speed, everything you want from your website! If a developer introduced a bug in his WordPress plugin, you might encounter downtime or unexpected errors and for most sites, this is completely unnecessary. A simple plugin update could introduce problems in security and performance.</p>
<p>A static site generator flips the entire process around. It generates all the pages on the site, once any changes have been made, ready for deployment. Static sites are more easy to secure as there are no working parts to exploit. Scaling is less of a consideration as there is no more overhead to a request than the delivery of already generated content. Read more about <a href="https://www.webceo.com/blog/static-website-vs-dynamic-website-which-is-better-for-seo/">static sites vs dynamic sites</a> if you’re still not convinced that static sites might just be the answer to <a href="https://moz.com/learn/seo/page-speed">a lot of your problems</a>.</p>
<h2>Another blog, with Gatsby</h2>
<p>The <a href="https://github.com/gatsbyjs/gatsby-starter-blog">starter blog</a> by <a href="https://twitter.com/kylemathews">Kyle Mathews</a> is great! But I felt it was missing a few well-known features you’d come to expect from a blog if you’re familiar with <a href="https://wordpress.org/">Wordpress</a> or similar blog frameworks.</p>
<p>In this guide, we’re going to use Gatsby to generate our content from <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> files along with adding pagination to pages and allow our users to log in using <a href="https://auth0.com/docs/libraries/auth0js">Auth0.js</a>.</p>
<h3>React</h3>
<p>Gatsby uses React for its ability to enable developers to build modular and reusable code. React has a large collection of open source components, guides, and tools that are all relevant, as Gatsby acts close to a normal React application.</p>
<p>Newcomers to React can learn about <a href="https://auth0.com/blog/bootstrapping-a-react-project/">bootstrapping a React project</a> here.</p>
<h3>GraphQL</h3>
<p>If a query language and an API had a baby, the result would be something like GraphQL. You can send GraphQL your query and it will return exactly the data you want, in the format you want, right out of your existing data.</p>
<p>Gatsby uses GraphQL for loading data into React components when it’s needed. More importantly, it will handle many of your data transformations when generating the site, not when the pages are loaded.</p>
<p>If you’re not familiar with it, you can follow our guide to <a href="https://auth0.com/blog/building-an-instagram-clone-with-graphql-and-auth0/">building an Instagram clone with GraphQL and Auth0</a> or check out the <a href="https://www.howtographql.com/">how to use GraphQL</a> site by Graphcool.</p>
<h2>Pre-requisites for Gatsby</h2>
<p>Gatsby requires <code class="language-text">node</code>, <code class="language-text">npm</code>, and features a handy command line tool for creating and running commands against your Gatsby sites.</p>
<h3>Node &#x26; NPM</h3>
<p>To get started we’re going to need <code class="language-text">node</code> and <code class="language-text">npm</code> installed. Let’s check if they’re installed by running:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash">node --version</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> --version</code></pre>
      </div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-94bcc.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 67.64397905759162%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABYUlEQVQ4y93Qz0vCYBjA8UWd/X3ZO3V6tEuiHcRDdBM3c2D5huUh+iMKlPqjEiuoHRJSAiV9p9GcEpGF5Dp069ChZ/O1Ijo4u/XChweed/seXub05Hj1qnaZaytKtnndzBKiYKVFMFE6WK7WsXwu48pFBctnMq5Wa7jT7mBi3BOqRTYUouQb9UaIMU5+e1Pe3cm9YZwdZTLrL+l0Wh+TdCG1pieTSV0URV0QBD0lpnQJ9l/fmIaSJL0nEokDMxiLLZcj4dCj3+9XWYQ0l8ulut3ursFj8Hg+TfY/3ICh0+ksmMFoNFyOLC0+BYMBjecDfQj3LFJ5nh8hhIpmECGu5PV6B0ADPZ/P1weTOQ0VjFiWHQc5jivBYgC0GWJTBfv/P3hEg136flb9GnygF9oMbsHz9+CJsQD3NGzVHXiF4KEZtNvtWw6HowBzD+a+VfS/os1mW2HomQMLfzRvdOLxOPMB3GZBkRTvsm8AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Node versions for Gatsby"
        title=""
        src="/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-7476a.png"
        srcset="/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-5131c.png 250w,
/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-37136.png 500w,
/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-7476a.png 1000w,
/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-a41db.png 1500w,
/static/node-versions-for-gatsby-03e680d68bd0fe74be08d8609cafd010-94bcc.png 1910w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If you don’t have <code class="language-text">node</code> and <code class="language-text">npm</code> installed, check out <a href="https://nodejs.org/">nodejs.org</a> and install the correct version for your operating system. </p>
<h3>Gatsby CLI</h3>
<p>So lets installed the gatsby CLI locally, then we can use it anywhere.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --global gatsby-cli</code></pre>
      </div>
<h2>Create a basic Gatsby starter project</h2>
<p>Now the CLI is installed, let’s create a new project from the starter blog.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash">gatsby new auth0-gatsby-blog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre>
      </div>
<p>This downloads all the files we need and initializes the site by running an <code class="language-text">npm install</code> for us.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-dd5a6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 72.42152466367713%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADDklEQVQ4y5WSTXPSYBDHc3PGmVprRV5CSAIkQEtDKU1ICCRQ1Hh0HL150WkddRxe1IP65Zx+BJ12FAh5oQiVEtDWD+BuWurozcNv/psnyT67/11i/+P+lcnx+PbMm96bz+Z3Z55nID/nc2MynRnO0ciYjI+N8WhsjL6NjOnJiTGfzYzTn6fGr7NfC+6dnZ7Vu53uVeL+g4f0u3dvxh/ev/3RarWnrfZrr/36jddoNKeNZnv68lVjCrHXbLa9RrPlNVst+KY9ff78xcne7t7k2d4zxNvd3XUfPXyUIkJRms4VpG4uv+XmC6KdL2w7G7lNm+NTFs0wfSSGyrJ9KhYzyWjUjJCkubKy0lteXu5eYAKfl5aWeILjOLpa082yph1p1R23Vr8z0Gv1QVmrunJJdbMbgi3ABRtCzqZp2qQoyoxBYowZhgFlUPHdQTgc5olEOkNrdd2s1evDil5zJVlx05mMlVlbt+PxeD8KFUGCPiTy44X+gwUcBINBnohDhUpJ6enV6hAq86taW8/afCplxVmmn0wwFguJkWSSs1hoPZFMWokEkujHz7EZlj0MBAI8wTIUfXtHMfWqNpTViltUSm6pXHHViu6KxaIrCBt2QZSczfyWg5rfKlzGhW3REYsy6gBs+UJRMZ6IRClaEvNmRVWG25LsKGrZzW3mbbzdrwTAyjiOv4yToDwMLclxlu8jeAi2nHuY5im6Xsn0dK00VLXaorpBYVvyq8BntAFjqahA1bK7OFMrmosDg8sduOzwFrac4qK0URPMkiIeiUXFwZZFqeiIF9Uq6vnPyJ+zsott4+RhC6xUOuOAx4ehUIgn6FiIVqRUV5bPE+KUseWsINioyHo2668Oqp9EwFXK2bgNOBQYoF9hOAwJg6EArar5r3pFdmCpTfClBy10YYk74VCoA750IpHI3wqgkmSkE42SX0mS7AGfYG04Ihwh2bVMasQnmBkcfod9miCwbxMw+gSBGLhQ/zl2oXhO4bceMICEaWL52rWllRurj28Ggk/h1icLwI//4SnweHV19fpvt/qK6sD6h+sAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Gatsby CLI building new project"
        title=""
        src="/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-7476a.png"
        srcset="/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-5131c.png 250w,
/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-37136.png 500w,
/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-7476a.png 1000w,
/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-a41db.png 1500w,
/static/cli-building-new-gatsby-project-3a55b28e8b54665663deaa4df9083c9c-dd5a6.png 1784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">cd</span> auth0-gatsby-blog/
gatsby develop</code></pre>
      </div>
<p>Once it has compiled successfully, you can view the site at <a href="http://localhost:8000/">localhost:8000</a>.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-94bcc.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 72.04188481675394%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACt0lEQVQ4y52T20/aYBiHOWQJboIXYATlYGlpMVBORQ7lJHJoTJZ4NWenbon/1/YnLNuMBw4ZZDMe4mFejtHSwkCdYdvVkl3u/TpZHHFejOTJ91K+Pvze92tV/Oq6+vWrl8W93XerhwdHywf7h8vv94/5zc0tfguolCv8ztY2v/FmQ2Eb6tJOia/X6vzZhzP+5ORk+fT0dO346JjTaDRqFXzurzx5tLv+bOnn07XH31ZXlr4vLj78ms1m+7lcrp/P5/uFQkFZB3WxWOxzHNdfWFhAXAE/uCK3azAYHoBPa4izM2U2wZyzCbYViTASTXtFyj0jYE68SZCkYJmc/GQymRrj4+MNtA4wGo0No8n4Eeo21Ds6nW4MBdSn0nh1bj52mcrk5Wg80U7NzXd8/oBEklQLczpFh8Mh2u124R804feu1WotQ8sGEOr0qYyrmp6LXmZzXDuZznSY2YhMUlTLZrOJU1NTAlqHuHmtCXRhX1mr1SLhiD6dIVDCL+lsXkbCGJtsB4IhGccJJSGSQoI/DEmHhff0MZaqxljmIhpPSmwy1Q5HojJKSRCulhOEGIYBThHViBsy4RahSk8H6UqQCZ77A8GWl6Ylj9cjES5Ip4gwRTI9PQ0rLmJ/C5WEMMeu1WarqNVqJNTqcwVPJZnyXTBhf2s24pNnIwHZ73dL6DCQ6Ga7wy3D9yak7+E4XgXZ74TweJRIyt3zer1iOByWKDgQBJohbBTvmJ94a8sukizRPn8P2hWCoRDI3Kg9AWQKhMslwKmLsA9Jm9eSAQ2gA8LSQGgAUT0QYvpwEN04mziHuufxB3oeX6CHE8RndIPd4ejArDqoHkKG61fwRzUQjql0IyOjdrvjOdywBzOrQV2HTXUb5lSAt6RmNpvv4q3FYtmbmJh4AQ/2KEqoAcwAAeD/CXHt0P4CkjROQkYPEpMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Gatsby development server first run"
        title=""
        src="/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-7476a.png"
        srcset="/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-5131c.png 250w,
/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-37136.png 500w,
/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-7476a.png 1000w,
/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-a41db.png 1500w,
/static/gatsby-development-server-first-run-e7d41e5dc76597ad503b673aed7bb0de-94bcc.png 1910w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>And it should look <em>something</em> like this!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-cf3f6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.27473426001634%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACEklEQVQ4y62TzaraUBDHA111Uwp9gW6l79GX6aaLwvWuuvAdXCkKUnDjwkXvxY3W+BGsYr03UfygkLYmmlyNHzEmOZ6c6ZxIwN5ipbQDf4aBOb+ZM+eMUCgUnrVan98Nh8PrTqcTHwwGcVVV44qixPv9fhhHPtJoNPpFePZKkqT31Wr1tZBOp2Pb7Ra4eZ4H/2KTySQvZDKZGKXUwZiiCDfsjmBXpN1uE0wi2Dnpdruk1+uR8XhMGGOE557I5UDTNNNCNpuNISNqjTmOw5LJJEulUiyfz7Pb21tWqXxixWKRlUolVi6XWRAE7JEd+GHDMDIR0I+AruvCx5sbQBj0FeWPV0RQJHoWeDgcQLn7AqvVCtQfGpgLCwxzAZZlwWLxAMu1DRt7D7Ztn0LPA13Phau3b6Avy2B7DBZrBzY7D3DOwIuRAw3FY3YRGI4DYOcScH0EBJdf9vKVaQDfjA18ndmgmg44Hp83O50X4KMcO+TVj9DzwAATp99VmGlTMOY66JoG2hSl6SgNdF0P58ln7Pv+70D+DxG4PxZnWDig1talODv6sN5RZ+9S3/Movj7Fjx8KO+QAyvO5MA7J8/k8LeRyuVeP5zKzXLCcALbk7zZluVx+EBKJxEvcjAqqhWrK9/dSo1YN1ayLUqNel0SxJtXR12pHL4pi6HFzJNwoSZblBvq7ZrN5LaA9QT1HvfgPevoTOJOtxS+inrQAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Basic Gatsby install"
        title=""
        src="/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-7476a.png"
        srcset="/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-5131c.png 250w,
/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-37136.png 500w,
/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-7476a.png 1000w,
/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-a41db.png 1500w,
/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-dcd0a.png 2000w,
/static/basic-gatsby-install-675a2b91b175a414274db4e8c93a30be-cf3f6.png 2446w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2>Enhancing our Gatsby blog</h2>
<p>We’re going to add some features to our blog that I’ve become accustomed to.</p>
<h3>Pagination</h3>
<p>This helpful starter blog is just for starters. But like so many starter apps, it might not be immediately clear how to add a feature like pagination.</p>
<p>To build our pagination, we need to turn our starter blogs structure upside down. In our starter blog, we have the file <code class="language-text">src/pages/index.js</code> which acts as our index page, which generates a list of all our blog content.</p>
<p>What we need to do is generate our index page based on constraints (like maximum articles per page) and every other page we might need, dynamically, based on how many articles we have.</p>
<p>So let’s go ahead and just delete <code class="language-text">src/pages/index.js</code> and see what it has done to our blog.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-cf3f6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.27473426001634%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAByElEQVQ4y62TW2saQRTHB/LUlxDoF+jrkO+RT1TI5qkPvgiihEiw0IYIEij4IYqIriYoBLwigrJdXRUvq+66s5eZnDNo0qTVkMQDP3b3XP5zzswOSafTh6pa+Fqr1c5ub++UdrutaJqmVKtVpV6v/0Oj0VCazeYzwHeqquq3TCZzQpLJJF2tHIEWBIH4iLVarV8kEonQbrdr9ft9H3ANw5D0ej13NBq5g8HA1XVdPtGPBrUvWaHgcDi8IuFwmGazWSeXy4l8Ps9LpZKkUCjwYrEo3yuVCi+Xyxzy+Gw241D7Eg8FYdFrkkgk6Hw+Z57nCcuy+GtjYx5jTDiOI59rfIzBBNckGo3STqfDYFyh6z0+nU7FcrkU0ImAhYRt2xL0TSYT6TfNucA8jK+Rgn0U/A4dQpBBd5jMTdMUGzB5sVhIEexoh/mPI8diMfpH0xiubtsr7vu+HGvD5hu3gnO+jSfBi3icVutNBicEhS7f1QYWb/E/CZ5f/qTdkc0mFhfMC/im8H/8HdsqGE/8oMZ4YU+XDMYNfAy+FdgOtj7lK5JKpY7Fnmw8Ht+QUCj0BX7c30ARyAPqO8jB3b+Hi3FGwA6AI+DzHvj0AEOStg6QW5gNAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Broken Gatsby homepage"
        title=""
        src="/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-7476a.png"
        srcset="/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-5131c.png 250w,
/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-37136.png 500w,
/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-7476a.png 1000w,
/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-a41db.png 1500w,
/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-dcd0a.png 2000w,
/static/broken-gatsby-homepage-65ac29852b1113d2ec7e6acbd3bdc680-cf3f6.png 2446w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const">Constants (or <code class="language-text">const</code>)</a> are one of a few <a href="https://auth0.com/blog/a-rundown-of-es6-features/">new features in ES6</a> and we’re going to be using them in this guide. </p>
<p>They’re block-scoped and can be either global or local to the block they were declared. </p>
<blockquote>
<p>“The <code class="language-text">const</code> <strong>declaration</strong> creates a read-only reference to a value. It does not mean the value it holds is immutable, just that the variable identifier cannot be reassigned. For instance, in the case where the content is an object, this means the object’s contents (e.g., its parameters) can be altered” – <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const">developer.mozilla.org</a>.</p>
</blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">Arrow functions (e.g. <code class="language-text">param =&gt; { // your func here }</code>)</a> are another <a href="https://auth0.com/blog/a-rundown-of-es6-features/">new feature in ES6</a> that you’ll see used through this guide. They’re the <strong>new function</strong> expression and they’re shorter! But they do have some drawbacks, not having their own <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"><code class="language-text">this</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments">arguments</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super">super</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new.target">new.target</a>. They are best suited for non-method functions, always called with the context in which they are defined.</p>
<p> <strong>Handy!</strong>  </p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let">Lets (or <code class="language-text">let</code>)</a> are also new to ES6. They are block-scoped local variables that you intend to reassign.</p>
<p>Now, lets edit <code class="language-text">gatsby-node.js</code> to start building our pagination, by adding a <code class="language-text">const</code> for how many articles per page we want to display. Because our demo has 3 articles, make our page length <code class="language-text">2</code>, giving us two pages.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> boundActionCreators <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">const</span> pageLength <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>We’re going to need a function that takes a page index and creates us a path (with an optional prefix).</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> boundActionCreators <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">const</span> <span class="token function-variable function">pageToPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> pathPrefix<span class="token punctuation">,</span> maxPages<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathPrefix <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pathPrefix <span class="token operator">=</span> <span class="token template-string"><span class="token string">`/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pathPrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      pathPrefix <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pathPrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> maxPages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pathPrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>We need one more function now, that will take a collection of articles (or “nodes”) and create the paginated index pages. This could be a paginated list based on a category, a date or just all your articles.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> boundActionCreators <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">const</span> <span class="token function-variable function">createPaginatedPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    edges<span class="token punctuation">,</span>
    pathPrefix <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    component<span class="token punctuation">,</span>
    context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> groupedPages <span class="token operator">=</span> edges
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>edge<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> index <span class="token operator">%</span> pageLength <span class="token operator">===</span> <span class="token number">0</span>
          <span class="token operator">?</span> edges<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> index <span class="token operator">+</span> pageLength<span class="token punctuation">)</span>
          <span class="token punctuation">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>edge <span class="token operator">=></span> edge<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> maxPages <span class="token operator">=</span> groupedPages<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    _<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>groupedPages<span class="token punctuation">,</span> <span class="token punctuation">(</span>group<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> pageNumber <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token function">pageToPath</span><span class="token punctuation">(</span>pageNumber<span class="token punctuation">,</span> pathPrefix<span class="token punctuation">,</span> maxPages<span class="token punctuation">)</span><span class="token punctuation">,</span>
        component<span class="token punctuation">:</span> component<span class="token punctuation">,</span>
        context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          group<span class="token punctuation">:</span> group<span class="token punctuation">,</span>
          nextPath<span class="token punctuation">:</span> <span class="token function">pageToPath</span><span class="token punctuation">(</span>pageNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> pathPrefix<span class="token punctuation">,</span> maxPages<span class="token punctuation">)</span><span class="token punctuation">,</span>
          prevPath<span class="token punctuation">:</span> <span class="token function">pageToPath</span><span class="token punctuation">(</span>pageNumber <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pathPrefix<span class="token punctuation">,</span> maxPages<span class="token punctuation">)</span><span class="token punctuation">,</span>
          extraContext<span class="token punctuation">:</span> context
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>To recap, we have now created:</p>
<ul>
<li>a variable with our page length;</li>
<li>a function to take a page number and return it’s URL;</li>
<li>a function that will take a collection of pages, create an index page and subsequent pages, each limited to our page length.</li>
</ul>
<p>But at this very moment, we’re still getting our 404. We need to use this code. Let’s do it.</p>
<p>Create a new template file, <code class="language-text">src/templates/index.js</code> and add the following content to it.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/templates/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'gatsby-link'</span>
<span class="token keyword">import</span> <span class="token keyword">get</span> <span class="token keyword">from</span> <span class="token string">"lodash/get"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Helmet <span class="token keyword">from</span> <span class="token string">'react-helmet'</span>

<span class="token keyword">import</span> Bio <span class="token keyword">from</span> <span class="token string">'../components/Bio'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rhythm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/typography'</span>

<span class="token keyword">class</span> <span class="token class-name">IndexPage</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> siteTitle <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'props.data.site.siteMetadata.title'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> pathContext <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> group<span class="token punctuation">,</span> nextPath<span class="token punctuation">,</span> prevPath <span class="token punctuation">}</span> <span class="token operator">=</span> pathContext<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>Helmet title<span class="token operator">=</span><span class="token punctuation">{</span>siteTitle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Bio <span class="token operator">/</span><span class="token operator">></span>
        <span class="token punctuation">{</span>group<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> node <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">'frontmatter.title'</span><span class="token punctuation">)</span> <span class="token operator">||</span> node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>h3
                style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  marginBottom<span class="token punctuation">:</span> <span class="token function">rhythm</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">></span>
                <span class="token operator">&lt;</span>Link style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> to<span class="token operator">=</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span><span class="token operator">></span>
                  <span class="token punctuation">{</span>title<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>
              <span class="token operator">&lt;</span>small<span class="token operator">></span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">></span>
              <span class="token operator">&lt;</span>p dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token punctuation">:</span> node<span class="token punctuation">.</span>excerpt <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>
          <span class="token punctuation">{</span>prevPath<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
          <span class="token operator">&lt;</span>Link style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> to<span class="token operator">=</span><span class="token punctuation">{</span>prevPath<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> Older posts
          <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">{</span>nextPath<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
          <span class="token operator">&lt;</span>Link style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> to<span class="token operator">=</span><span class="token punctuation">{</span>prevPath<span class="token punctuation">}</span><span class="token operator">></span>
            Newer posts <span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
          <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span></code></pre>
      </div>
<p>If you still had our <code class="language-text">src/pages/index.js</code> that we deleted earlier, you’ll notice there are some similarities. Probably because I copy and pasted it, making the changes necessary. I’ll talk you through the changes now.</p>
<p>The main difference between the original <code class="language-text">src/pages/index.js</code> and our <code class="language-text">src/templates/index.js</code> is that we don’t need a <code class="language-text">graphql</code> query to retrieve the articles for the page. Instead, we’re using the result of the data in our <code class="language-text">gatsby-node.js</code> file to render to pages we need.</p>
<p>The other change is that we’ve now added our pagination below the articles. We’ve kept it simple and just passed a <code class="language-text">previous</code> and <code class="language-text">next</code> link into our template. Each paginated index we generate has the context of the previous and next pages in the list.</p>
<p>So we have our functions to generate our index pages and our template. Lets edit <code class="language-text">gatsby-node.js</code> again and put it all together.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
<span class="token operator">...</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> boundActionCreators <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> blogPost <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./src/templates/blog-post.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token function">graphql</span><span class="token punctuation">(</span>
      <span class="token operator">...</span>
      <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">// Create blog posts pages.</span>
        <span class="token keyword">const</span> posts <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges<span class="token punctuation">;</span>

        <span class="token comment">// Create main paginated index of posts.</span>
        <span class="token function">createPaginatedPages</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          edges<span class="token punctuation">:</span> posts<span class="token punctuation">,</span>
          component<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./src/templates/index.js`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code></pre>
      </div>
<p>Gatsby uses a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code class="language-text">Promise</code></a> to contain the GraphQL request and subsequent handling of the result. This enables Gatsby to compile the site asynchronously and a Promise represents the eventual completion (or failure). </p>
<p>We’re adding our <code class="language-text">createPaginatedPages</code> function to the Promise’s result.</p>
<p>Let’s see if it works, visit <a href="http://localhost:8000/">localhost:8000</a>.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-cf3f6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.27473426001634%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8klEQVQ4y61SzarTUBAOuHIjgi/gtvgevowrQTB3dRd9jBJaKIJc6TNIFza30o1NKi0tePPXn7RJmjT/OTnjzLFx4dV7r+LAx8mczHwz35yRBoPBk/H485v5fH4xmUxkPOU4jmXLsuTVaiX8xWJxJzDmraqql8Ph8KWkKEoriiIgK4oCOOdgmibs93tgjMHf2HK5fC91u90WJiboU3aZZVl5dfWh7HQ65fj6uqS7ByAjQtd1FanX67XKsszPRXhVVfyrPuXYNbecLT94R74/+DwMQx74Pg/ChB9PCY9PJ9RCgoRVlLzb7boNYdEQZnkG8utXoGtTOOU1HI4JhHGO8ivAOKgqBhWOgsbBQTAS2O8JRTGAOC0gKzCpvn9udxOSZGQxtiGsNhHcuAkkOanhTaIAazqk6j9I/0xYY6BtGrBxbNht1rB2HLBtGxw8CWtnDb7vQxAEYivuJ6w5HHFmfpSCF6aQZgXQ7zzPBUGzWg+XjENfGK6Q7XhImJdUBWoEyaQTN0E8EH3f6pD2EH+m5+dnGMxs84ZZxjfmWCbDJWeGYfwE+ZZpsTCMGOYxykFi0dB2u1Wkfr//4tbLwb+Z53nvpHa7/VzX9Y+IMWKEUKeapmqars5mM5X8BuT/enfGJ7z/MhqNLiS0R4iniGf/AY+/AwKlt5H/J7qSAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Paginated Gatsby page 1"
        title=""
        src="/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-7476a.png"
        srcset="/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-5131c.png 250w,
/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-37136.png 500w,
/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-7476a.png 1000w,
/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-a41db.png 1500w,
/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-dcd0a.png 2000w,
/static/gatsby-paginated-page-1-1bbd855c027ebdfef6568a881e75d8aa-cf3f6.png 2446w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-cf3f6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.27473426001634%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABm0lEQVQ4y62TzUrDQBCAA568iOALeC2+h09UMD156HPYForgpUcRvEgPNgqFUknSlIBCE21aiG3TtEkmmx1n11YEW1t/Bj7YZXa+7EwSpVar7d3d3eetjlVoNpuqYZjq09Ojquu6XJumqXY6lmpZX+l2uxJan2iadlqv14+VUqmUm0wmKCKOY/xL2LZ9oZTL5RxjbEZ7RkAcR3B9dQmUhFZbhwfdBP91BEEwhfF4BONpBEEYwWwWgji/IBLC4XB4plQqlRwALK/Gozjip4U8b7dafDiaccfzOUl4mqacznFImUTsP0UqigeDQXkpTKSNQrbO3tkmRAnBVgpFPk0ZGo8e2u4rTsIEM8YwAcCUgE8kCeWybCldLxQC78XF/rOLjtMjXOz1HHQdV677/T6G0xADepHU9iYh5xm1MKZ5T+cgbyBYtIWLiWzf8mLAyDJOIr5pbh8P+Fa4rnCFZLVQfIcknMv5ZRkTyZ9CdfJCnuedKdVq9Qj/KXzfP1eKxeIh/bc3xD3RILRfcGsYRrvRaBQUih1inzj4B3bfAGKJvcIGE/J8AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Paginated Gatsby page 2 broken"
        title=""
        src="/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-7476a.png"
        srcset="/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-5131c.png 250w,
/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-37136.png 500w,
/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-7476a.png 1000w,
/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-a41db.png 1500w,
/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-dcd0a.png 2000w,
/static/gatsby-paginated-page-2-broken-d8fdbb164464c68cd8683b153f9f589e-cf3f6.png 2446w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Great, it works! But incase you missed it, there is clearly something wrong on page two. In our layout file, we have a condition around the default <code class="language-text">&lt;h1&gt;</code> that turns it into a <code class="language-text">&lt;h3&gt;</code> if we’re not on the absolute homepage. Let’s modify the styling on the <code class="language-text">&lt;h3&gt;</code> to fix this little issue. This is a great opportunity for you to put your own stamp on your site.</p>
<p>Here’s my fix, edit <code class="language-text">src/layouts/index.js</code> and remove the following line.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code class="language-diff">// src/layouts/index.js
             fontFamily: 'Montserrat, sans-serif',
             marginTop: 0,
<span class="token deleted">-            marginBottom: rhythm(-1),</span></code></pre>
      </div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-cf3f6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.27473426001634%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVQ4y62T22rCQBCGA73qTSn0BXorfY8+UaF600K96kN4ACm0UOkjFC/qAbwpqIlK0UTRxNZDDmqy2cx0Vg1UaLW2DnyZJLv77/yziZTNZo+KxdKFIiuxcrkcrdVqUVVVo5VKZXEvy3K0Xq9vRFGUy0KhcJ3L5c6lZDIZMU0TRbiui/+JZrN5L6VSqQjnfErPnGBBEDDdMFi73WaaqjJVbTPxfgtzITgYDBJSOp2OMMbC0sB15/D0+ACtVgveWhpo3R68f4yAXMB4NIKxOYWJPQXHtgFo/ip8sdgwjFQo6IWCnufh7c0VNhQZbQ9waM3RdFzkvo80D5nP0SfIFQIuFAX8W0GxlchiO5cu8Iu+bRQU46KCylsfG53RsjLuo+exZXVfEE6o36Hoz4IBWTF6XdSJTkcjKGsd7FIW9Ps6Oo6DlmWRdX+bIEBAFiYOQ3vmh3bW2Mny6sSQB0B2YFPP1jZYExTfIQnOFnaDgIvBXaF1i4J0XU9ImUzmDPcUw+HwTorH46f03z4TJSJPFP7AS7Vafc3n8zGJ4oA4Jk72wOEnrgy9UBmZHM0AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Paginated Gatsby page 2 fixed"
        title=""
        src="/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-7476a.png"
        srcset="/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-5131c.png 250w,
/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-37136.png 500w,
/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-7476a.png 1000w,
/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-a41db.png 1500w,
/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-dcd0a.png 2000w,
/static/gatsby-paginated-page-2-fixed-8dd7670b4dc441dca20d55fdb1fe1083-cf3f6.png 2446w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2>Gatsby and Auth0</h2>
<p>When you have a blog, you’ll probably have readers (you hope) and you’ll also want to let them know when you create a new post. For this, we’re going to use <a href="https://auth0.com">Auth0</a> to identify our users.</p>
<p>We’re also going to be following the <a href="https://auth0.com/docs/quickstart/spa/react">Auth0 React Quickstart</a> to get set up with Auth0 authentication on our new application. If you’re confident with React you could skip straight to the quickstart or get the code you need from the <a href="https://github.com/auth0-samples/auth0-react-samples/tree/embedded-login">Auth0 React samples repository</a>.</p>
<p>The <a href="https://auth0.com/docs/hosted-pages/login">Auth0 login page</a> is the easiest way to set up authentication in your application.</p>
<h3>Sign Up for Auth0</h3>
<p>You’ll need an <a href="https://auth0.com">Auth0</a> account to manage authentication. You can <a href="https://auth0.com/signup" data-amp-replace="CLIENT_ID" data-amp-addparams="anonId=CLIENT_ID(cid-scope-cookie-fallback-name)">sign up for a free Auth0 account here</a>. Next, set up an Auth0 Application so Auth0 can interface with your app.</p>
<h3>Set Up an Application App</h3>
<ol>
<li>Go to your <a href="https://manage.auth0.com/#/"><strong>Auth0 Dashboard</strong></a> and click the ”<a href="https://manage.auth0.com/#/applications/create">create a new application</a>” button. </li>
<li>Name your new app, select “Single Page Web Applications”, and click the “Create” button. </li>
<li>In the <strong>Settings</strong> for your new Auth0 app, add <code class="language-text">http://localhost:8000/callback</code> to the <strong>Allowed Callback URLs</strong>.</li>
<li>Click the “Save Changes” button.</li>
<li>If you’d like, you can <a href="https://manage.auth0.com/#/connections/social">set up some social connections</a>. You can then enable them for your app in the <strong>Application</strong> options under the <strong>Connections</strong> tab. The example shown in the screenshot above utilizes username/password database, Facebook, Google, and Twitter.</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Under the <strong>OAuth</strong> tab of <strong>Advanced Settings</strong> (at the bottom of the <strong>Settings</strong> section) you should see that the <strong>JsonWebToken Signature Algorithm</strong> is set to <code class="language-text">RS256</code>. This is the default for new applications. If it is set to <code class="language-text">HS256</code>, please change it to <code class="language-text">RS256</code>. You can <a href="https://community.auth0.com/questions/6942/jwt-signing-algorithms-rs256-vs-hs256">read more about RS256 vs. HS256 JWT signing algorithms here</a>.</p>
</blockquote>
<h3>Install auth0.js</h3>
<p>You need the auth0.js library to integrate Auth0 into your application.</p>
<p>Install auth0.js using npm.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save auth0-js</code></pre>
      </div>
<h3>Create the Auth component</h3>
<p>We’ll need a new React component to manage and coordinate user authentication. </p>
<h4>Basic component</h4>
<p>Create a new file <code class="language-text">src/utils/auth.js</code> and inside it put the following code:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/utils/auth.js</span>
<span class="token keyword">import</span> auth0 <span class="token keyword">from</span> <span class="token string">'auth0-js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">AUTH0_DOMAIN</span> <span class="token operator">=</span> <span class="token string">'&lt;your-domain>.auth0.com'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">AUTH0_CLIENT_ID</span> <span class="token operator">=</span> <span class="token string">'&lt;your-client-id>'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Auth</span> <span class="token punctuation">{</span>
  auth0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">auth0<span class="token punctuation">.</span>WebAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    domain<span class="token punctuation">:</span> <span class="token constant">AUTH0_DOMAIN</span><span class="token punctuation">,</span>
    clientID<span class="token punctuation">:</span> <span class="token constant">AUTH0_CLIENT_ID</span><span class="token punctuation">,</span>
    redirectUri<span class="token punctuation">:</span> <span class="token string">'http://localhost:8000/callback'</span><span class="token punctuation">,</span>
    audience<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">AUTH0_DOMAIN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/v2/`</span></span><span class="token punctuation">,</span>
    responseType<span class="token punctuation">:</span> <span class="token string">'token id_token'</span><span class="token punctuation">,</span>
    scope<span class="token punctuation">:</span> <span class="token string">'openid profile email'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>auth0<span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Edit <code class="language-text">src/utils/auth.js</code> and replace <code class="language-text">&lt;your-domain&gt;</code> and <code class="language-text">&lt;your-client-id&gt;</code> with your Auth0 domain prefix and your client ID, found on your <a href="https://manage.auth0.com/#/applications">application dashboard</a>.</p>
<p>Due to a dependency issue, we also need to tell Gatsby about a global variable in order for Webpack to know about it in production builds. This won’t affect us in development, but later on this could come back and surprise us!</p>
<p>So now edit <code class="language-text">gatsby-node.js</code> and add the following code.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
<span class="token operator">...</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">modifyWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> config<span class="token punctuation">,</span> stage <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>stage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"build-html"</span><span class="token punctuation">:</span>
      config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'define'</span><span class="token punctuation">,</span> webpack<span class="token punctuation">.</span>DefinePlugin<span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string">"global.GENTLY"</span><span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> boundActionCreators <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token operator">...</span></code></pre>
      </div>
<h4>Test our component</h4>
<p>Quickly, we’ll test that we can load our new component from any part of the app. To quickly do this we’ll add the following code to our <code class="language-text">src/templates/index.js</code> file.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/templates/index.js</span>
<span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rhythm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/typography'</span>

<span class="token comment">// Add this to test we can load our Auth component</span>
<span class="token keyword">import</span> Auth <span class="token keyword">from</span> <span class="token string">'../utils/auth.js'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
auth<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">IndexPage</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
<span class="token operator">...</span></code></pre>
      </div>
<p>When you visit <a href="http://localhost:8000/">localhost:8000</a> now, we’ll be redirected to our login page. <strong>Logging in won’t work!</strong> We haven’t built our callback yet. But at least we know our library is loading just fine. </p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-27c12.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.0909090909091%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADWElEQVQ4y52Tz28bVRDHI3FCwH9QED/q/Ng49q69Xnt37bW9aydpGqgEouXQqiBx4dJLDQduVSmqVKmHViXQKCpC4gClQhyQ2qwQgR6apkoTJ3aaXEodUdlxqjptknWa3X3fzlsHLtx40uiN/d58Zr5vZruWV1ZO1B/c//TvWu1ko9EotdtOaW2tUeL++nqz1Gyu/Wv8/3q9Hpw1GnX6vVZaXa2dXFgofzY7Oxvq4mt6egbL95awWK2gsrSEanUJ5fIC7t6dx/x8GeWFRcyXFzE31/H5ebV6L9grlSoqtC8vr+DHqz99GAAHBuKbUTHpi1JqV4qrbiyuubGY6lrWiHv4yDH3/fc+CIz7B0ffdRUl4yYSaTcua65EMaKYfBaJKgiFhKMdYCThSDEVsqwzRTFYOl1g4bDMzpw5y5qtDfbg1hRbnfqVNR49Zteu/cySySxT1TztBpMTaUaxPhWEUHf/sQAYi6sOHYJf0nULefMAJEnD+fMX4Gw/xcPafdRX/0Lr8TpuXL+BTKaIbHYIlBiqFoB9AqOvL9oBygndIRgIxgxjEIXi21RtGpe+GsfTNlCrb+Hhox00nwBTN2eQzw/DNEeQzQ1BT1u8Wp8XJPRLHWBCyTiaZiKdKbBcbhiDg+9AowRnz13CD39u4PL1LUxMbuJr28fE1WmMDI/CtEYJfAAZo8g03fRTag7hcKwDVDhQN7kUlqPsQ0OHkEzmMD5+BXy1nW3stJ3AvzNzB4XCKIqkgj8NKfovkDrmqLxCagaXwStMKAbGxsYJwbDRamF7aysATt+6Hci1rIPgybkqivWTqSz6w3uSqf1OKpUDyWZ0IbgsSSq+mfgugDzZ2cXmrh/4t+cWeVUBjOQGMalU1qdnQ58gdoA0Q5vUej4CLoE9I1PwwrLhXfzkuIfvv/RaE6e9jStfeO63p70/Tp3wVN30SI1HHfZohFyK26W5RU9v5Og/TQk6xrNS16Brech6ER9nFFy2BFwoirg4KGHMCuPzrAiNRosbfzeaW8RlHfQx8Dn8KABGRfmXZCr9m6oakwORuN3dM2D3C1F7vxCzXxVk+7U94/4bQtwWBNHu7YvYPXQv1B2294eEyTff6v19377Xza699SLZK2Qv/0/jsS+RvcBhzwE58CLfFHx9GgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Gatsby Blog Auth0 login box"
        title=""
        src="/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-7476a.png"
        srcset="/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-5131c.png 250w,
/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-37136.png 500w,
/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-7476a.png 1000w,
/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-a41db.png 1500w,
/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-dcd0a.png 2000w,
/static/auth0-login-box-d563bf984325904e97a48bacd754a26e-27c12.png 2310w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Now go ahead and remove the test code from <code class="language-text">src/templates/index.js</code>.</p>
<h4>Finish the component</h4>
<p>We need a few more methods in the <code class="language-text">Auth</code> util to handle authentication in the app. So add the following code to <code class="language-text">src/utils/auth.js</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/utils/auth.js</span>
<span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> navigateTo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby-link"</span><span class="token punctuation">;</span>

<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Auth</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>login <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>login<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>logout <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>logout<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleAuthentication <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleAuthentication<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isAuthenticated <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isAuthenticated<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'access_token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'id_token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'expires_at'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>auth0<span class="token punctuation">.</span><span class="token function">parseHash</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> authResult<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>authResult <span class="token operator">&amp;&amp;</span> authResult<span class="token punctuation">.</span>accessToken <span class="token operator">&amp;&amp;</span> authResult<span class="token punctuation">.</span>idToken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSession</span><span class="token punctuation">(</span>authResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Return to the homepage after authentication.</span>
        <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expiresAt <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'expires_at'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> expiresAt<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setSession</span><span class="token punctuation">(</span>authResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expiresAt <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authResult<span class="token punctuation">.</span>expiresIn <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'access_token'</span><span class="token punctuation">,</span> authResult<span class="token punctuation">.</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'id_token'</span><span class="token punctuation">,</span> authResult<span class="token punctuation">.</span>idToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'expires_at'</span><span class="token punctuation">,</span> expiresAt<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">userInfo</span><span class="token punctuation">(</span>authResult<span class="token punctuation">.</span>accessToken<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Now we need our callback, so create a new file at <code class="language-text">src/pages/Callback.js</code> and copy  the following code into it.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/pages/Callback.js</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Auth <span class="token keyword">from</span> <span class="token string">'../utils/auth'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Callback</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    auth<span class="token punctuation">.</span><span class="token function">handleAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Callback<span class="token punctuation">;</span></code></pre>
      </div>
<blockquote>
<p><strong>Note:</strong> For our example repository, you’ll notice we use an animated <code class="language-text">svg</code> in our callback. I haven’t included it here for the sake of simplicity.</p>
</blockquote>
<p>Exclude <code class="language-text">Callback.js</code> from being rendered with our usual layout, without the Bio or headers. No one should ever see the callback page anyway, so it needs to be fast. So edit <code class="language-text">src/layouts/index.js</code> and add the following lines. This returns a basic layout for the <code class="language-text">/callback</code> path.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code class="language-diff">// src/layouts/index.js
...
     const { location, children } = this.props;
<span class="token inserted">+</span>
<span class="token inserted">+    // Callback doesn't need nav etc, so return early</span>
<span class="token inserted">+    if (location.pathname === '/callback') {</span>
<span class="token inserted">+      return (</span>
<span class="token inserted">+        &lt;div></span>
<span class="token inserted">+          &lt;Container></span>
<span class="token inserted">+            {children()}</span>
<span class="token inserted">+          &lt;/Container></span>
<span class="token inserted">+        &lt;/div></span>
<span class="token inserted">+      )</span>
<span class="token inserted">+    }</span>

     let header;
...</code></pre>
      </div>
<p>We don’t need to register the <code class="language-text">Callback.js</code> file with a router, which you might do in  a more traditional React application. Gatsby automatically routes anything in the <code class="language-text">pages/</code> directory. So <code class="language-text">src/pages/Callback.js</code> becomes <code class="language-text">/callback</code> on our application. The Gatsby docs have a great page on <a href="https://www.gatsbyjs.org/docs/creating-and-modifying-pages/">creating and modifying pages</a>, if you’re interested in what else you can achieve with the pages feature.</p>
<p>Next, we’re going to add a new component for navigation. This could hold our branding, some links to static pages and our log in/log out link. Create <code class="language-text">src/components/Nav.js</code> and paste in the code below.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/components/Nav.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Auth <span class="token keyword">from</span> <span class="token string">'../utils/auth'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Nav</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      authenticated<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    auth<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      authenticated<span class="token punctuation">:</span> auth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    auth<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      authenticated<span class="token punctuation">:</span> auth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      authenticated<span class="token punctuation">:</span> auth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          height<span class="token punctuation">:</span> <span class="token string">'50px'</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">></span>
        <span class="token operator">&lt;</span>div
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            float<span class="token punctuation">:</span> <span class="token string">'right'</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"/"</span>
             style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
               boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
               lineHeight<span class="token punctuation">:</span> <span class="token string">'37px'</span>
             <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">></span>
            Home
          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
          <span class="token operator">&lt;</span>span<span class="token operator">></span> <span class="token operator">|</span> <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
          <span class="token punctuation">{</span>
            <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>authenticated <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span>
                  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>login<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                  style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                    boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
                    lineHeight<span class="token punctuation">:</span> <span class="token string">'37px'</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">></span>
                  Log In
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>authenticated <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span>
                  onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>logout<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                  style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                    boxShadow<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
                    lineHeight<span class="token punctuation">:</span> <span class="token string">'37px'</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">></span>
                  Log Out
                  <span class="token punctuation">{</span>
                    auth<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span>span<span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>auth<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                    <span class="token punctuation">)</span>
                  <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Now add our <code class="language-text">&lt;Nav&gt;</code> to <code class="language-text">src/layouts/index.js</code> like so. </p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code class="language-diff">// src/layouts/index.js
...
     return (
       &lt;div>
         &lt;Container
           style={{
             maxWidth: rhythm(24),
             padding: `${rhythm(1.5)} ${rhythm(3 / 4)}`,
           }}
         >
<span class="token inserted">+          &lt;Nav /></span>
           {header}
           {children()}
         &lt;/Container>
       &lt;/div>
     )
...</code></pre>
      </div>
<p>Let’s preview our <a href="http://localhost:8000/">dev site</a> again. It should look something like this.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACFUlEQVQ4y62Ty4oaQRSGGzUXmJeI2ecVspsEssw2IYs8zrjI3qWbCbgwEJEsFELAjBm8IAlqvICD3XZr3+/d1V19cqptByc4k1mk4aPqVNX5OefvKq7ZbD4dDoelyWTCONtsNqXZfIHMSrPZjul0emNczOelOZLtnzG63e6HVqv1jOt0Oq/gP339fv89NxgMTpMkoRiTPf6GJ8KKJ7bjEt/3iWVZxHVdYtsWISQiXhiTMKLkICdggtjhGw5VX6Agi5M4jtPJj8tLKJfLcH7+Eer1OlSrVWg0GlCr1WC14tNqWE4Gy4nZ2mg0entDkFKaTtBTqFQqcHHx/db2jgmOx+PjgtPJCEa/foK0VUHRTNB0E2zbBtO0wHQCcBwHspy7Bfctf/vagi+fP0GEkW554HgBRFEEaCCQKE7n9xLcbSYQ4LbmJaA5MdA7/uo/W842QdV0mC6uYCXKIG1k0DQtRVVV0HUdWzchDMP7Vgjg+SGo6JuqW6lvzD+8OilBEAB6nXJUsNfrnaJ3LKZ0d4qKskF/LyW6lAxqWC4NfJ96CIpRz/MoVpeeZfc3I7q+NnhFXv7tDTOdtWeZBthYlYEtsjYNw0jHiERHPcWn+Y7D9/d8vV6LkiQJe4S1JCx5SdjKsqAoyjVyFm+3W+HwPMKLoqi02+3XXC6Xe1woFJ4gxT0PH+SKJ49yRY7jbiWfzxcPcxi4dvIHQLbB3Twj838AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Nav added to Gatsby blog"
        title=""
        src="/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-7476a.png"
        srcset="/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-5131c.png 250w,
/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-37136.png 500w,
/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-7476a.png 1000w,
/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-a41db.png 1500w,
/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-dcd0a.png 2000w,
/static/nav-added-to-gatsby-086df83a01545c58f47a3e980f5c6660-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>And now when we log in, our application now knows who we are.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQ4y62Ty4oaQRSGGzUXmJeI2ecVspsEZpltQhZ5nHGRvUs3E3AjRGQWCiFgxgxekAQ1XsAw3Xbbbd+vVnf1yalSB2fQYRZp+Khzqur81Pm7SqjX6y/7/X5hNBoxzpfLZWEynSGTwmSyYTwec1g8xfnZdIrjdLd+zmi3258bjcYrodVqncF/+rrd7ieh1+udpmlKMSc7wqVIpBuRuJ5PwjAkjuMQ3/eJplvEckPiR5REhJK9mogJYofvBVR9g4IsT5Mk4cHP62soFotwcfEFqtUqlMtlqNVqUKlUQBJFfhpWs4XVJGxuMBh8uCNIKeUBegqlUgmurn4cbW9Tc1dwOBweFhyPBjD4/QsUVYeVYYNh2uC6Lti2A7YXged5W0F4WHDX8vdvDbj8WoEYM9MJwAsiiOMYCCFA4oTHjxLcLKYQ4bIRpGB4CdAH/up9D48IAuiGCePZX7iRNVCWGhiGwdF1HUzTxNZtWK/Xjz0hQBCuQUffdNPhvjH/8OpwoigC9JpzULDT6ZyidyyndLOLyppF/8wVOlcsajk+jcKQBgiK0SAIKJ6O72X3d0t8e23wiry97w0znbXn2Ba4eCoLW2RtWpbFx5jEBz3F5/lRwPf3erFYyIqiSDukhSLNRUVSNU1arVa3aNtcVVVpfz8iyrK8ajab74RMJvM8l8u9QPI7nj7J5E+eZfKCIBwlm83m92sYOHfyD9Jmwb/NFiw9AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Logged into the Gatsby blog"
        title=""
        src="/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-7476a.png"
        srcset="/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-5131c.png 250w,
/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-37136.png 500w,
/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-7476a.png 1000w,
/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-a41db.png 1500w,
/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-dcd0a.png 2000w,
/static/logged-into-the-gatsby-blog-74b155e0755bc9e5fcba6dda0f2638c6-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2>Newsletter with Webtasks</h2>
<p>Now we can log in, we want to be able to signup to our blog to receive updates on new articles and other news. We’re going to use Webtask to create our API. Webtask provides API endpoints as services. Serverless endpoints designed to make developers lives easily and eliminate the need for unnecessary infrastructure. </p>
<h3>Setting up a Webtask</h3>
<p>If you’re in a rush, you can skip this step and use a Webtask endpoint I’ve already created: <code class="language-text">https://wt-b374f39b442dc589a2d950057c95207e-0.run.webtask.io/auth0-newsletter-wt-api</code>.</p>
<p>To not distract us from our goal of developing an awesome Gatsby application, here is <a href="https://auth0.com/blog/building-serverless-apps-with-webtask/">a guide to producing a serverless application with Webtask.io</a>, a serverless code service. With the following Webtask, we’re going to be able to subscribe to a newsletter for our blog.</p>
<p>You can also give it a go, <a href="https://webtask.io/cli#">setting up your own Webtask</a> and creating your own endpoint. They have a great step by step interactive guide. You can get the source for this Webtask in my <a href="https://github.com/lukeoliff/auth0-newsletter-wt-api">Newsletter Webtask</a> GitHub repository. </p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACu0lEQVQ4y52QW08TQRiGV1oiUX+ENfHSK++9oyZqUFGIhAYS/QN6gQoxIqdAaKI3eOEP8EL9A9BCbAptaWm3pyiHHunubGnZnrDbbbfd+ZwZCpZgvHCSJ9/Mfvu+887HrX13XAsGAta9nZ9WQZIWBUGw7u7uWmOxmDUej5/Seab7ExKJ5GIqnV70+/0fHA7HDc67uXkHyKqV8gC4Bf+zdP1Y53a5nnKhIN+rY9Cr2X1NKRU1Xdc10mPQfb1e1xRFYZWuzj6lWv2lCfvpOjV0Op3DHM/zZowxPeM2QM/tb5DL5SAcicD29jbUajXo7HfoWESXy2X5Y4hP1xnDcrkMyWQSMhkBSMpzhm0NM9zY2LBwwSBvbo/iNOFJoQJFqYIsy1AoFEBV1b+N8GxCn89nJqMBrdnEWqOBtRYmwyPDaTSg0UbTmgxVrTNTlSRlmmNws9ls0Qetr69buOUVu1lEWRCRhIUDGaOoB1BgFTJSHuh3QZQAkZoRRCgUS1BVVKgcVeFYw8CEVi4vg92+Sg1tZipihlIeS3tRSAScMLfwHqZmFmBqeg7eTVFmYWZ2HuYXrLD08RO5AJ1ciAUx2zqUi+D2eDoTHpAGwlK+CPGMBJOT0zA+8RZevX4DYy/HCROM5y/G2CXnDUvg29piCXvbTV2gpNK6mErphVJFL1eO9KpSI6hnIE/WyYt0YsZASGpWygXwen0WzmZfu03jyoTDIwUOt7xwsLYM/sgPCIejsBdLMGLxJKvxRIqloxqaqlAswr4og39HBZ4PjHBfvn67xQdD2VAogoIEYoLcbg8aGh5BjweeoIHBIfSwfxD19fWjvvuP0N17D9Do6DMU4EPk/yiKRCLI6Q6LS58jss220s91dXX1GI3GqwSTwWAwdV/sMXGkchz3T4jORDUXuoymK5cMppvXOVO30Xj5N83tjuhGCWb0AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Webtask CLI setup"
        title=""
        src="/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-7476a.png"
        srcset="/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-5131c.png 250w,
/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-37136.png 500w,
/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-7476a.png 1000w,
/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-a41db.png 1500w,
/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-dcd0a.png 2000w,
/static/webtask-cli-setup-0414ea116dffe1cdb9981f2b73241d55-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h4>Install wt command line interface.</h4>
<p><code class="language-text">wt</code> is an <a href="https://github.com/auth0/wt-cli">open source</a> Node.js CLI to interact with the Webtask API.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> ---global wt-cli</code></pre>
      </div>
<h4>Initialize wt</h4>
<p><code class="language-text">wt</code> will ask for an e-mail or phone number to send you an activation code. Once activated you’ll be able to create Webtasks from command line.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash">wt init <span class="token punctuation">(</span>your email address here<span class="token punctuation">)</span></code></pre>
      </div>
<h4>Create our Webtask</h4>
<p>Now let’s make our basic newsletter Webtask.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">touch</span> newsletter.js</code></pre>
      </div>
<p>Copy and paste the code below into <code class="language-text">newsletter.js</code>.</p>
<blockquote>
<p><strong>Note:</strong> This file doesn’t need to be in the same root or directory tree as your Gatsby application. We’re just creating a file that we can run our <code class="language-text">wt</code> CLI against, to set up our endpoint on <a href="https://webtask.io">Webtask.io</a>.</p>
</blockquote>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// newsletter.js</span>
<span class="token string">'use latest'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> bodyParser <span class="token keyword">from</span> <span class="token string">'body-parser'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Webtask <span class="token keyword">from</span> <span class="token string">'webtask-tools'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> jwt <span class="token keyword">from</span> <span class="token string">'express-jwt'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> jwksRsa <span class="token keyword">from</span> <span class="token string">'jwks-rsa'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">RESPONSE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">OK</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    statusCode <span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'subscribed'</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token string">'You have successfully subscribed to the newsletter!'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">UNSUBSCRIBED</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    statusCode <span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'unsubscribed'</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token string">'You have successfully unsubscribed from the newsletter!'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">DUPLICATE</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    statusCode <span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'duplicate'</span><span class="token punctuation">,</span>
    message <span class="token punctuation">:</span> <span class="token string">'You are already subscribed.'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">ERROR</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    statusCode <span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token string">'Something went wrong. Please try again.'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> issuer <span class="token operator">=</span> <span class="token template-string"><span class="token string">`https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>secrets<span class="token punctuation">.</span><span class="token constant">AUTH0_DOMAIN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">jwt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    secret<span class="token punctuation">:</span> jwksRsa<span class="token punctuation">.</span><span class="token function">expressJwtSecret</span><span class="token punctuation">(</span><span class="token punctuation">{</span> jwksUri<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issuer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.well-known/jwks.json`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    audience<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>issuer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">api/v2/`</span></span><span class="token punctuation">,</span>
    issuer<span class="token punctuation">:</span> issuer<span class="token punctuation">,</span>
    algorithms<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'RS256'</span> <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">userProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userinfo <span class="token operator">=</span> <span class="token template-string"><span class="token string">`https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>secrets<span class="token punctuation">.</span><span class="token constant">AUTH0_DOMAIN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/userinfo`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>userinfo<span class="token punctuation">,</span> <span class="token punctuation">{</span> headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> Authorization<span class="token punctuation">:</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>authorization <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sendResponse</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token constant">RESPONSE</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">RESPONSE</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/subscribe'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">userProfile</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> email <span class="token operator">=</span> result<span class="token punctuation">.</span>email<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span> email <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span> err <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span> _<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> err <span class="token operator">=></span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span> err <span class="token operator">===</span> undefined <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'DUPLICATE'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/unsubscribe'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">userProfile</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> email <span class="token operator">=</span> result<span class="token punctuation">.</span>email<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span> email <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span> err <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          <span class="token keyword">const</span> index <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span> index <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> err <span class="token operator">=></span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span> err <span class="token operator">===</span> undefined <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'UNSUBSCRIBED'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/subscribed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">userProfile</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> email <span class="token operator">=</span> result<span class="token punctuation">.</span>email<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span> email <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span>webtaskContext<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span> err <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span> _<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'UNSUBSCRIBED'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Webtask<span class="token punctuation">.</span><span class="token function">fromExpress</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Run <code class="language-text">wt</code> again to create our new Webtask, where it will create our newsletter Webtask and prompt you to open it for editing on the Webtask code editor. It will also return the URI for the Webtask for you to use in this application. Copy it or use our demo, provided above.</p>
<p>Our Gatsby app will provide the Webtask with our <code class="language-text">access_token</code>. Usually, <code class="language-text">auth0.js</code> would require an opaque string usable by Auth0 only for an openid request against our identity endpoint. As we’re changing our audience to our default Management API, our <code class="language-text">access_token</code> is returned as a JWT instead. You can read more about this on <a href="https://auth0.com/docs/tokens/access-token">Auth0’s Access Token docs</a>.</p>
<p>The JWT <code class="language-text">access_token</code> returned is still perfectly acceptable for our openid request as well, but it also allows us to our JWT for our Webtask request so we can make sure the user subscribing/unsubscribing is doing so for themselves only.</p>
<p>In this <code class="language-text">create</code> command we’re providing our Webtask our AUTH0_DOMAIN so it can be used in the validation of our JWT. Even though your Auth0 domain is not particularly sensitive, we’ll still store it in a <a href="https://webtask.io/docs/editor/secrets">Webtask secret</a>, accessible by the application only. Secrets can also be added, removed and managed via the Secrets panel, which is in the settings menu in the Webtask Editor.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash">wt create newsletter.js \
    -s AUTH0_DOMAIN<span class="token operator">=</span>YOUR_AUTH0_DOMAIN.auth0.com</code></pre>
      </div>
<p>If you check out your Webtask in the <a href="https://webtask.it.auth0.com/edit">Webtask code editor</a>, you’ll see something like this:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACxklEQVQ4y4WSS08TURSAR6CdV1toO+9HZ+502gItAiExRg0+EkriwsTHxkhc6MKNiUKUxAQEdUcX/gWhIkF/kLFrJyZA4soEBmaO5w5NqSbGJl/OzZnb75x77mW+djre/t5e69fPg1YURxsA0ArDo1Z4dNg6pvE/4J4N3LtxsL/3vtP5NsG8Xlm9ub3Vhs2tT9De/gzbO19g6+MubLZ3MCLtMzb76M99SP67Cyurbx4xmmbP2YoWcUN8OMCw4SCSGhTCNJ8PU+wIMtyNIyHLF0JWQOg37jSXxsgJhUPMw8CQ+IDRimqzfu0WXLj/NJ6+/TieuvcEajfugm64oOk2yLINkmyCrFiYI2CYHuZdzFkgSTRvx5g/sewKjNenFhjDcJvexEXwZq7GzuTl2JmeBXN0BhTLB39sEsr+KJQ8G1TdgnzBgEKxDxQWJTPODisnZX8clpZeLjBmqdI0saqu2rGqWLFU1KGQV0E1yygaA4JC2m2+oP8p60KFuWEVhXVYXHyxwFhOtWnYPshqKVZ0N5Y1ByTFBg2P55XHwbC85LhFSUeMHrRAt0iczSkndO+z50tdIR4PZxKjKJbUUiJUUUyraibOUNGxIM5LNXrQ7s6EctLh8vKrPiHKaJdyn9AltVORciYZyev93fWEleoErK+/+7eQ3qRfaeCRbVB0AxTNTCjKxt/z7AnX1t4mwjnDKlNJhLIEusYOo2rtfGTaTqRoRh9mhDOMUJqAwiiTlY5p8aRD26nOG/iGaFey6tDLwSOWQEnWdH4mYtH3Rm+0R6F4SvIekXpjhnb4kNFNMmu7tR9IgN0GJYwlUgs8vx741XrglquB4zcCr9JIvumWH+AL6KGbHuW7V6kfXLpy/Q6DP45lWVfMZAjPC0QURZLN5QgvCITjRcJzWSJwHME9RBAzhBNEkkqzCWkaU2lcp8m5gUGCLvE3MHaW5WP9t8gAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Webtask in editor"
        title=""
        src="/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-7476a.png"
        srcset="/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-5131c.png 250w,
/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-37136.png 500w,
/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-7476a.png 1000w,
/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-a41db.png 1500w,
/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-dcd0a.png 2000w,
/static/webtask-in-editor-4d141fa4488281fc02fd98d73f0cb7c0-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>Subscribe to the Newsletter</h3>
<p>Now to enable our logged in users to subscribe/unsubscribe from our Gatsby application.</p>
<h4>Axios, react!</h4>
<p>No, it’s not a spell from Harry Potter. Axios is a Promise based HTTP client we can use in React. So go ahead and install this to our app.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save axios</code></pre>
      </div>
<h4>A Subscribe component</h4>
<p>Create the file <code class="language-text">src/componenets/Subscribe.js</code> and give it the following code, replacing <code class="language-text">&lt;your-webtask-uri&gt;</code> with a your Webtask url, if you’re not planning on using our demo Webtask at <code class="language-text">https://wt-b374f39b442dc589a2d950057c95207e-0.run.webtask.io/auth0-newsletter-wt-api</code></p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token comment">// src/componenets/Subscribe.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Auth <span class="token keyword">from</span> <span class="token string">'../utils/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> wtUri <span class="token operator">=</span> <span class="token string">'&lt;your webtask uri>'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Subscribe</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      subscribed<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isSubscribed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isSubscribed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isIdentified</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> auth<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> auth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isIdentified</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'access_token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>wtUri<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/subscribed`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"Authorization"</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
          localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'subscribed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            subscribed<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isSubscribed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isIdentified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'access_token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>wtUri<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/subscribe`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"Authorization"</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
          localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            subscribed<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isSubscribed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isIdentified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'access_token'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>wtUri<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/unsubscribe`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"Authorization"</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
          localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'subscribed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            subscribed<span class="token punctuation">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>subscribed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span>
           onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>unsubscribe<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>Unsubscribe<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span>
           onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>subscribe<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">></span>Subscribe<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<h4>Adding Subscribe to our Nav</h4>
<p>All that is left to do is add our <code class="language-text">Subscribe</code> component to <code class="language-text">Nav</code>. This will show in our <code class="language-text">Nav</code> whether our logged in user is already subscribed or not, allowing them to subscribe or unsubscribe as they see fit.</p>
<p>So edit <code class="language-text">src/components/Nav.js</code> and add the code as follows.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code class="language-diff">// src/components/Nav.js
  import React from 'react';
  import Auth from '../utils/auth';
<span class="token inserted">+ import Subscribe from './Subscribe';</span>

  const auth = new Auth();

  ...

            {
              isAuthenticated() &amp;&amp; (
                &lt;span>
                  &lt;a href="#"
                    onClick={this.logout.bind(this)}
                    style={{
                      boxShadow: 'none',
                      lineHeight: '37px'
                    }}
                  >
                    Log Out
                    {
                      auth.getUserName() &amp;&amp; (
                        &lt;span> ({auth.getUserName()})&lt;/span>
                      )
                    }
                  &lt;/a>
<span class="token inserted">+                 &lt;span> | &lt;/span></span>
<span class="token inserted">+                 &lt;Subscribe /></span>
                &lt;/span>
              )
            }

  ...</code></pre>
      </div>
<p>With that added, let’s run our app and see what we get!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACFUlEQVQ4y62TzY4SQRDHhw9doy8h3n0Fb6uJR68aDz4OHHwA98QJbiYLkURgNSGBgECIF5aZTcjuzDAfMMwMzAc905TVvcMGDa4cnOSXqp6u+qequluo1+vPRqNRYTweM/K6rhdE6aogiuIdk8mEI6EvSWLhSpK4ZXv4L497+R/9/seLi2/PhU6n8xr+09dutz8Iw+HwdLvdUlyTHd7shqiySjzPJ0EQEMdx0PeIadnEXQdkFcQkJJTs5YRMsNVqvRUGg8FLFGTrbRzH3Gk2m3B29glKpRLUajUol8vcVioVmM1UXg3LSWA5cSL47jdBSil3ut0eFItF6PW6f22P5xwr+HM0BHFyCTNjAYulA0vbgdXKBcddgbsOAduHJOd+wV3LX84/w/fmVx5lOR74wQaiKAJCIrQxYNxxgrebW/AjgIVHYenF957qP2eYbIJumCBNb+BaNcCcY9uLBViWxa1t24CnjtWSYysE8PwQZ+fy+Tmui/PD2aFlbDYbwFlzDgr2+/1TNhP8KL2NorJm0cupTq91h7prn+JdpD7Cre9TrI7Hsvub3OHoThCf3as/ZxOGIW/RdWxYYVU2njJjubR5lUkBh17Ke6HRaLxQVXWmaZqyQ1Y1ZSprimnOlfl8H5NbwzCU/Xh8/7KiKPNqtfpGSKfTj7LZ7FMkx8ggJw/SuccP0zlBEA6SSqVymUwmt8vZ48kv7KS/T7wTxuwAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Logged in and unsubscribed"
        title=""
        src="/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-7476a.png"
        srcset="/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-5131c.png 250w,
/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-37136.png 500w,
/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-7476a.png 1000w,
/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-a41db.png 1500w,
/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-dcd0a.png 2000w,
/static/logged-in-unsubscribed-5e64c3e1424b5c79b122251307a44df9-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Now subscribe to the newsletter!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-3169e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 69.68390804597702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACF0lEQVQ4y61Ty27aQBQ1jz7U/kTpvr/QXVKpy25bddHPgUU/oFmxgl2lBgWpQFoJCQQFhCokgkFCCTa2MdgeGGPGHm6vJyaiFU1ZdKSjM497j+49MyOVSqXn3W430+/3M71eL61pWkYejTKyLN9hMBgIHoYYypnRcCg42kvjefpHq/Xx8vLbC6ler7+G/zRqtdoHqdPpnGy3W45rtgOd3jB1ojJKXbZerxkhhK1WlBmmxZyVx4jrM49xtpfjhYLVavWt1G63T1EwXG+DIBCTSqUCZ2efIJfLQbFYhHw+L7hwfg5TVRXVhDkRwpwgEnz3myDnXEwajSZks1loNht/bU/kHCv4s9sBeXAFU2MOc8sBy3ZguSTgkCWQlQeUUohy7hfctXzx5TN8r3wVUQuHgrvegO/7wJiPHADGHSd4e7gF1weYUw4WDe691X96GB2CbsxgOL6Ba9WAmYltz+ewWCwE27YNjuNgtezYCgGo66F3RPjnEIL+oXfIITabDaDXAgcFW63WSegJDs5vo/hEW/Crsc6vdYeTlcvxLXIXIdh1OVYnYsP3G71h/04Qv92rP73xPE+0SBwblliVjbccwrJsUWVUwKGf8l4ql8svVVWd4h9WdpiomjKeaMpsZiqmuY+ZYMMwlP14XdcniqKYhULhjRSPxx8nk8lniFSIBOLRg3jqycN4SpKkg4jFYqlEIpHa5ezh6S+zyr9BztUy/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Logged in and subscribed"
        title=""
        src="/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-7476a.png"
        srcset="/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-5131c.png 250w,
/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-37136.png 500w,
/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-7476a.png 1000w,
/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-a41db.png 1500w,
/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-dcd0a.png 2000w,
/static/logged-in-subscribed-f56c1b8b4bc4285f126568d3b9ac2835-3169e.png 2784w"
        sizes="(max-width: 1000px) 100vw, 1000px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2>Conclusion</h2>
<p>There we have it, a Gatsby blog with Auth0 authentication, markdown post pagination, and newsletter signup for authenticated users with a Webtask using an Auth0 <code class="language-text">access_token</code>.</p>
<p>As Gatsby is a static site generator, to be able to make real use of our authentication we needed a backend application to provide functionality through an API to the React element of the site. Gatsby has a great guide and demo application for creating <a href="https://www.gatsbyjs.org/docs/building-apps-with-gatsby/">hybrid app pages</a>. </p>
<p>In this instance, we used <a href="https://webtask.io/">Webtask by Auth0</a> which allows us to build our own serverless API endpoints.</p>
<p>Gatsby has a dedicated <a href="https://www.gatsbyjs.org/tutorial/">tutorial</a> for building Gatsby applications.</p>
<p>If you want to learn more about React, here is a great guide on <a href="https://auth0.com/blog/bootstrapping-a-react-project/">bootstrapping a React project</a> and you also won’t want to miss <a href="https://reactforbeginners.com/">React for beginners</a> by <a href="https://twitter.com/wesbos">Wes Bos</a>.</p>
<p>Learn more about GraphQL with <a href="https://www.howtographql.com/">how to GraphQL</a>, which has plenty of resources based on the different types of technology you might be using.</p>
<p><strong>The final code can be found at the <a href="https://github.com/auth0-blog/auth0-gatsby-blog">auth0-gatsby-blog GitHub repo</a>.</strong></p>
<p>I welcome your questions, suggestions or improvements, below in the comments section! Thanks for reading.</p></div><footer><div>Loading...</div><div class="jsx-646394116 author"><div class="jsx-646394116 avatar"><img src="/static/avatar.fe8a3f2f.jpg" alt="dad, technical writer, security advocate - Luke Oliff" class="jsx-646394116"/></div><div class="jsx-646394116 note"><p><strong>Luke Oliff</strong> dad, technical writer, security advocate - writing about digital transformation, software security and new technology</p></div></div><div class="jsx-126278577 links"><a href="/common-threats-in-web-app-security/"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m36.4 21.4q0 1.2-0.9 2.1l-14.5 14.5q-0.9 0.8-2 0.8-1.2 0-2-0.8l-1.7-1.7q-0.9-0.8-0.9-2t0.9-2l6.5-6.6h-15.7q-1.1 0-1.9-0.8t-0.7-2v-2.9q0-1.2 0.7-2t1.9-0.9h15.7l-6.5-6.5q-0.9-0.8-0.9-2t0.9-2l1.7-1.7q0.8-0.9 2-0.9 1.2 0 2 0.9l14.5 14.5q0.9 0.8 0.9 2z"></path></g></svg><h4 class="jsx-126278577">Common Threats in Web Application Security<!-- --> <time class="jsx-126278577">2018-04-12<!-- --> </time></h4></a><a href="/oauth2-the-complete-guide/"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m36.3 20v2.9q0 1.1-0.7 2t-1.9 0.8h-15.7l6.5 6.6q0.9 0.8 0.9 2t-0.9 2l-1.7 1.7q-0.8 0.8-2 0.8-1.1 0-2-0.8l-14.5-14.6q-0.9-0.8-0.9-2 0-1.1 0.9-2l14.5-14.5q0.8-0.9 2-0.9 1.2 0 2 0.9l1.7 1.6q0.9 0.9 0.9 2.1t-0.9 2l-6.5 6.5h15.7q1.1 0 1.9 0.9t0.7 2z"></path></g></svg><h4 class="jsx-126278577">OAuth 2.0: The Complete Guide<!-- --> <time class="jsx-126278577">2018-02-07</time></h4></a></div><div id="post-comments" class="jsx-3595558049 comments"><div><div class="fb-comments" data-href="https://lukeoliff.com/building-a-blog-with-gatsby-react-and-webtask/" data-width="100%"></div></div></div></footer></article></main><footer class="jsx-2344609357 footer"><ul>
<li>owned by <a href="/">Luke Oliff</a></li>
<li>powered by <a href="https://www.gatsbyjs.org/">GatsbyJS</a></li>
<li>hosted by <a href="https://pages.github.com/">GitHub Pages</a></li>
<li>cached and secured by <a href="https://www.cloudflare.com/">Cloudflare</a></li>
<li>graphics from <a href="https://pxhere.com">pxhere.com</a></li>
<li><a href="/privacy/">privacy policy</a></li>
<li><a href="/terms/">terms &#x26; conditions</a></li>
</ul></footer></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"0":"0-c54303c9791f2f3ceb85.js","231608221292675":"app-b97bfefd3aeed9fc19ca.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","78839606078735":"component---src-templates-category-template-js-ccbdb357ea067077af6d.js","198517197184460":"component---src-templates-post-template-js-efb6222c664f8637d165.js","235131596041995":"component---src-templates-page-template-js-277489605b32655c14af.js","162898551421021":"component---src-pages-404-js-cf325d2e9bf981eec2f6.js","118442821920679":"component---src-pages-category-js-bbb34571e9395b2ce79b.js","35783957827783":"component---src-pages-index-js-4cdfe22c0237c1694edf.js","142807904292071":"component---src-pages-search-js-31e1970d09f08933da90.js","60335399758886":"path----1c45b9cbfed9af352b94.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","3422700230939":"path---category-portfolio-abfe5f8003db8473b533.js","24663704475854":"path---helloworld-with-auth-0-987b9b28137f91515b1e.js","179155616915032":"path---common-threats-in-web-app-security-a5f6771fa003b3228bef.js","48830299300409":"path---building-a-blog-with-gatsby-react-and-webtask-3fb1a26adc6104960c09.js","102443490631562":"path---oauth-2-the-complete-guide-39d028d86fec6034ab46.js","255549171910776":"path---build-your-first-app-with-polymer-and-web-components-83f4ae148e9fdb687140.js","273950069227526":"path---about-ce27028b0d4204d2e34d.js","89335538696419":"path---terms-b80415cd83c07b9cac75.js","166922164162147":"path---privacy-89341dd48dc54a723e27.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","115052432080904":"path---category-6bad50f0266ff0f0388e.js","142629428675168":"path---index-a79de9694db5f6888e25.js","254572558124955":"path---search-a1eea1489feed082ff7d.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-51093b88744bb31359c7.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto');
      }
      </script><script>/*<![CDATA[*/["/commons-44750fa6a1ae314db841.js","/app-b97bfefd3aeed9fc19ca.js","/path---building-a-blog-with-gatsby-react-and-webtask-3fb1a26adc6104960c09.js","/component---src-templates-post-template-js-efb6222c664f8637d165.js","/component---src-layouts-index-js-51093b88744bb31359c7.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>